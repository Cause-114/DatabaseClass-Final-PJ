{% extends "base.html" %}
{% block content %}
<h2>搜索内容结果</h2>
<form method="get" action="{% url 'search_content' %}" class="mb-3">
    <input type="text" name="q" placeholder="请输入关键词" value="{{ query }}" class="form-control" />
    <button type="submit" class="btn btn-primary mt-2">搜索</button>
</form>

{% if query %}
<h5>关键词: "{{ query }}"</h5>
<table class="table table-hover">
    <thead>
        <tr>
            <th>内容ID</th>
            <th>关键词</th>
            <th>网页URL</th>
            <th>内容类型</th>
            <th>内容文本</th>
        </tr>
    </thead>
    <tbody>
        {% for content in results %}
        <tr>
            <td>{{ content.content_id }}</td>
            <td>{{ content.keywords }}</td>
            <td>
                <a href="{% url 'webpage_contents' content.webpage.url %}">{{ content.webpage.url }}</a>
            </td>
            <td>{{ content.get_type_display }}</td>
            <td>{{ content.text|truncatewords:20 }}</td>
        </tr>
        {% empty %}
        <tr>
            <td colspan="5">无匹配结果</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% else %}
<p>请输入关键词进行搜索。</p>
{% endif %}
{% endblock %}