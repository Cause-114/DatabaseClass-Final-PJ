{% extends "base.html" %}
{% block content %}
<style>
    /* 限制URL列宽度，超长省略 */
    .url-cell {
        max-width: 300px;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
    }

    /* 按钮列靠右且按钮间距 */
    .action-cell {
        white-space: nowrap;
    }

    .action-cell .btn {
        margin-left: 5px;
    }
</style>

<h2>抓取网页列表</h2>
<div style="overflow-x: auto;">
    <table class="table table-striped table-hover align-middle">
        <thead>
            <tr>
                <th style="min-width: 300px;">URL</th>
                <th>所属网站</th>
                <th>爬取时间</th>
                <th style="white-space: nowrap;">操作</th>
            </tr>
        </thead>
        <tbody>
            {% for page in webpages %}
            <tr>
                <td class="url-cell" title="{{ page.url }}">{{ page.url }}</td>
                <td>
                    <a href="{% url 'website_pages' page.website.domain %}">{{ page.website.domain }}</a>
                </td>
                <td>{{ page.crawl_time }}</td>
                <td class="action-cell">
                    <a href="{% url 'webpage_contents' page.url %}" class="btn btn-sm btn-primary">查看内容</a>
                    <a href="{% url 'webpage_images' page.url %}" class="btn btn-sm btn-secondary">查看图片</a>
                </td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="4">暂无数据</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}